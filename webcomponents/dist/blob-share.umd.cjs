(function(E){typeof define=="function"&&define.amd?define(E):E()})(function(){"use strict";function E(){}function U(t){return t()}function O(){return Object.create(null)}function C(t){t.forEach(U)}function q(t){return typeof t=="function"}function ne(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let M;function F(t,e){return M||(M=document.createElement("a")),M.href=e,t===M.href}function ie(t){return Object.keys(t).length===0}function k(t,e){t.appendChild(e)}function g(t,e,l){t.insertBefore(e,l||null)}function _(t){t.parentNode.removeChild(t)}function P(t,e){for(let l=0;l<t.length;l+=1)t[l]&&t[l].d(e)}function x(t){return document.createElement(t)}function y(t){return document.createTextNode(t)}function $(){return y(" ")}function oe(){return y("")}function h(t,e,l){l==null?t.removeAttribute(e):t.getAttribute(e)!==l&&t.setAttribute(e,l)}function re(t){return Array.from(t.childNodes)}function z(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function S(t,e,l){t.classList[l?"add":"remove"](e)}function se(t){const e={};for(const l of t)e[l.name]=l.value;return e}let A;function N(t){A=t}function ae(){if(!A)throw new Error("Function called outside component initialization");return A}function fe(t){ae().$$.on_mount.push(t)}const L=[],D=[],R=[],V=[],ce=Promise.resolve();let B=!1;function ue(){B||(B=!0,ce.then(w))}function H(t){R.push(t)}const I=new Set;let T=0;function w(){const t=A;do{for(;T<L.length;){const e=L[T];T++,N(e),de(e.$$)}for(N(null),L.length=0,T=0;D.length;)D.pop()();for(let e=0;e<R.length;e+=1){const l=R[e];I.has(l)||(I.add(l),l())}R.length=0}while(L.length);for(;V.length;)V.pop()();B=!1,I.clear(),N(t)}function de(t){if(t.fragment!==null){t.update(),C(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(H)}}const he=new Set;function me(t,e){t&&t.i&&(he.delete(t),t.i(e))}function be(t,e,l,n){const{fragment:o,on_mount:s,on_destroy:i,after_update:u}=t.$$;o&&o.m(e,l),n||H(()=>{const r=s.map(U).filter(q);i?i.push(...r):C(r),t.$$.on_mount=[]}),u.forEach(H)}function ge(t,e){const l=t.$$;l.fragment!==null&&(C(l.on_destroy),l.fragment&&l.fragment.d(e),l.on_destroy=l.fragment=null,l.ctx=[])}function _e(t,e){t.$$.dirty[0]===-1&&(L.push(t),ue(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function pe(t,e,l,n,o,s,i,u=[-1]){const r=A;N(t);const f=t.$$={fragment:null,ctx:null,props:s,update:E,not_equal:o,bound:O(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(r?r.$$.context:[])),callbacks:O(),dirty:u,skip_bound:!1,root:e.target||r.$$.root};i&&i(f.root);let m=!1;if(f.ctx=l?l(t,e.props||{},(d,c,...a)=>{const b=a.length?a[0]:c;return f.ctx&&o(f.ctx[d],f.ctx[d]=b)&&(!f.skip_bound&&f.bound[d]&&f.bound[d](b),m&&_e(t,d)),c}):[],f.update(),m=!0,C(f.before_update),f.fragment=n?n(f.ctx):!1,e.target){if(e.hydrate){const d=re(e.target);f.fragment&&f.fragment.l(d),d.forEach(_)}else f.fragment&&f.fragment.c();e.intro&&me(t.$$.fragment),be(t,e.target,e.anchor,e.customElement),w()}N(r)}let G;typeof HTMLElement=="function"&&(G=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(U).filter(q);for(const e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(t,e,l){this[t]=l}disconnectedCallback(){C(this.$$.on_disconnect)}$destroy(){ge(this,1),this.$destroy=E}$on(t,e){const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(e),()=>{const n=l.indexOf(e);n!==-1&&l.splice(n,1)}}$set(t){this.$$set&&!ie(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});function J(t){const e={weekday:"long",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(t).toLocaleString(void 0,e)}function K(t,e,l){const n=t.slice();return n[10]=e[l],n}function Q(t,e,l){const n=t.slice();return n[13]=e[l],n}function W(t){let e;return{c(){e=x("link"),h(e,"rel","stylesheet"),h(e,"href",t[4])},m(l,n){g(l,e,n)},p(l,n){n&16&&h(e,"href",l[4])},d(l){l&&_(e)}}}function X(t){let e,l,n=t[1]&&t[3]&&Y(t),o=t[5],s=[];for(let i=0;i<o.length;i+=1)s[i]=le(K(t,o,i));return{c(){e=x("div"),n&&n.c(),l=$();for(let i=0;i<s.length;i+=1)s[i].c();h(e,"id","blobShare"),S(e,"dark",t[2]),S(e,"light",!t[2]),S(e,"sidebar",t[3]),S(e,"nosidebar",!t[3])},m(i,u){g(i,e,u),n&&n.m(e,null),k(e,l);for(let r=0;r<s.length;r+=1)s[r].m(e,null)},p(i,u){if(i[1]&&i[3]?n?n.p(i,u):(n=Y(i),n.c(),n.m(e,l)):n&&(n.d(1),n=null),u&41){o=i[5];let r;for(r=0;r<o.length;r+=1){const f=K(i,o,r);s[r]?s[r].p(f,u):(s[r]=le(f),s[r].c(),s[r].m(e,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=o.length}u&4&&S(e,"dark",i[2]),u&4&&S(e,"light",!i[2]),u&8&&S(e,"sidebar",i[3]),u&8&&S(e,"nosidebar",!i[3])},d(i){i&&_(e),n&&n.d(),P(s,i)}}}function Y(t){let e;return{c(){e=y(t[1])},m(l,n){g(l,e,n)},p(l,n){n&2&&z(e,l[1])},d(l){l&&_(e)}}}function Z(t){let e,l,n,o,s,i,u;return{c(){e=x("a"),l=x("div"),n=x("img"),h(n,"style","aspect-ratio=1.7778;"),h(n,"alt",o=t[10].title),F(n.src,s=t[10].image?t[10].image:t[0]+"/noimg.svg")||h(n,"src",s),h(n,"loading","lazy"),h(l,"class","img"),h(e,"href",i=t[0]+"/item/"+(t[10].slug||t[10].id)),h(e,"title",u=t[10].title),h(e,"target","_blank")},m(r,f){g(r,e,f),k(e,l),k(l,n)},p(r,f){f&32&&o!==(o=r[10].title)&&h(n,"alt",o),f&33&&!F(n.src,s=r[10].image?r[10].image:r[0]+"/noimg.svg")&&h(n,"src",s),f&33&&i!==(i=r[0]+"/item/"+(r[10].slug||r[10].id))&&h(e,"href",i),f&32&&u!==(u=r[10].title)&&h(e,"title",u)},d(r){r&&_(e)}}}function ee(t){let e,l=t[10].tags,n=[];for(let o=0;o<l.length;o+=1)n[o]=te(Q(t,l,o));return{c(){e=x("div");for(let o=0;o<n.length;o+=1)n[o].c();h(e,"class","tags")},m(o,s){g(o,e,s);for(let i=0;i<n.length;i+=1)n[i].m(e,null)},p(o,s){if(s&32){l=o[10].tags;let i;for(i=0;i<l.length;i+=1){const u=Q(o,l,i);n[i]?n[i].p(u,s):(n[i]=te(u),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=l.length}},d(o){o&&_(e),P(n,o)}}}function te(t){let e,l=t[13].name+"",n;return{c(){e=x("span"),n=y(l),h(e,"class","tag")},m(o,s){g(o,e,s),k(e,n)},p(o,s){s&32&&l!==(l=o[13].name+"")&&z(n,l)},d(o){o&&_(e)}}}function le(t){let e,l,n,o,s=J(t[10].date)+"",i,u,r,f=t[10].title+"",m,d,c,a,b=!t[3]&&Z(t),p=t[10].tags.length&&ee(t);return{c(){e=x("div"),b&&b.c(),l=$(),n=x("div"),o=x("div"),i=y(s),u=$(),r=x("a"),m=y(f),c=$(),p&&p.c(),a=$(),h(o,"class","subtitle"),h(r,"class","title"),h(r,"href",d=t[10].URL),h(n,"class","content"),h(e,"class","item")},m(v,j){g(v,e,j),b&&b.m(e,null),k(e,l),k(e,n),k(n,o),k(o,i),k(n,u),k(n,r),k(r,m),k(n,c),p&&p.m(n,null),k(e,a)},p(v,j){v[3]?b&&(b.d(1),b=null):b?b.p(v,j):(b=Z(v),b.c(),b.m(e,l)),j&32&&s!==(s=J(v[10].date)+"")&&z(i,s),j&32&&f!==(f=v[10].title+"")&&z(m,f),j&32&&d!==(d=v[10].URL)&&h(r,"href",d),v[10].tags.length?p?p.p(v,j):(p=ee(v),p.c(),p.m(n,null)):p&&(p.d(1),p=null)},d(v){v&&_(e),b&&b.d(),p&&p.d()}}}function ke(t){let e,l,n,o,s,i=typeof t[3],u,r,f,m=t[4]&&W(t),d=t[5].length&&X(t);return{c(){m&&m.c(),e=$(),l=y(t[2]),n=y(" -  "),o=y(t[3]),s=$(),u=y(i),r=$(),d&&d.c(),f=oe(),this.c=E},m(c,a){m&&m.m(c,a),g(c,e,a),g(c,l,a),g(c,n,a),g(c,o,a),g(c,s,a),g(c,u,a),g(c,r,a),d&&d.m(c,a),g(c,f,a)},p(c,[a]){c[4]?m?m.p(c,a):(m=W(c),m.c(),m.m(e.parentNode,e)):m&&(m.d(1),m=null),a&4&&z(l,c[2]),a&8&&z(o,c[3]),a&8&&i!==(i=typeof c[3])&&z(u,i),c[5].length?d?d.p(c,a):(d=X(c),d.c(),d.m(f.parentNode,f)):d&&(d.d(1),d=null)},i:E,o:E,d(c){m&&m.d(c),c&&_(e),c&&_(l),c&&_(n),c&&_(o),c&&_(s),c&&_(u),c&&_(r),d&&d.d(c),c&&_(f)}}}function ve(t,e,l){let{baseurl:n=""}=e,{title:o=""}=e,{maxlength:s=!1}=e,{blob:i=4}=e,{dark:u=null}=e,{sidebar:r=null}=e,{external_style:f=""}=e,m=!1,d=[];function c(){!m||fetch(`${n}/api/post/${i}`).then(a=>a.json()).then(a=>{l(5,d=a)}).catch(a=>{console.error("Error loading Blob API -> ",a)})}return fe(()=>{m=!0,c()}),t.$$set=a=>{"baseurl"in a&&l(0,n=a.baseurl),"title"in a&&l(1,o=a.title),"maxlength"in a&&l(6,s=a.maxlength),"blob"in a&&l(7,i=a.blob),"dark"in a&&l(2,u=a.dark),"sidebar"in a&&l(3,r=a.sidebar),"external_style"in a&&l(4,f=a.external_style)},t.$$.update=()=>{t.$$.dirty&128&&c()},[n,o,u,r,f,d,s,i]}class xe extends G{constructor(e){super(),this.shadowRoot.innerHTML=`<style>#blobShare{font-family:ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont,
      "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif,
      "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
      "Noto Color Emoji";overflow-x:hidden;width:100%;box-sizing:content-box;margin:0 auto;font-size:1rem;text-align:left;background-color:var(--bg-even-color)}.nosidebar{max-width:1200px}.sidebar{max-width:500px;box-shadow:rgba(60, 64, 67, 0.4) 0px 1px 2px 0px,
      rgba(60, 64, 67, 0.25) 0px 1px 3px 1px;border-radius:5px;font-size:1rem}.item{display:flex;gap:0.2rem;padding:0.5rem}.sidebar .item{flex-wrap:wrap}.item .img{width:450px;max-height:250px;aspect-ratio:1.7778;flex:1 0 auto}.item img{object-fit:cover;border-radius:15px;width:100%;height:100%;box-shadow:rgba(50, 50, 93, 0.25) 0px 6px 12px -2px,
      rgba(0, 0, 0, 0.3) 0px 3px 7px -3px}.nosidebar .item{margin-bottom:2rem}.nosidebar .content{margin-left:1rem;margin-top:5px;text-align:left}.sidebar .content{flex-grow:1}.tags{margin-top:2px}a{text-decoration:none;color:var(--text-color);margin:0;line-height:1.275rem;font-weight:400;font-size:0.875rem;position:relative;transition:background-color 0.3s cubic-bezier(0.25, 0.8, 0.5, 1), padding 0.3s;box-sizing:content-box;display:block}.dark{--bg-odd-color:#161616;--bg-even-color:#222;--bg-hover-color:#333;--text-color:white;--title-color:white;--line-color:rgba(120, 120, 120, 0.2)}.light{--bg-odd-color:#f5f5f5;--bg-even-color:#fafafa;--bg-hover-color:#eee;--text-color:#222;--title-color:black;--line-color:rgba(220, 220, 220, 0.9)}.sidebar .item{padding:1rem;border-bottom:1px solid var(--line-color)}.sidebar .item:hover,.sidebar .item:focus,.sidebar .item:active{background-color:var(--bg-hover-color)}.title{color:var(--title-color);font-weight:bold;font-size:1.3rem;line-height:1.1em}.nosidebar .title{font-size:1.9em;line-height:1.1em}.subtitle{font-size:0.9rem;line-height:1.1em;color:var(--title-color);opacity:0.9}.tags{display:flex;flex-wrap:wrap;gap:3px;justify-items:left}.tag{display:inline-block;border:1px solid orangered;background-color:#ff9999;padding:3px 5px;border-radius:3px;font-size:0.8rem}</style>`,pe(this,{target:this.shadowRoot,props:se(this.attributes),customElement:!0},ve,ke,ne,{baseurl:0,title:1,maxlength:6,blob:7,dark:2,sidebar:3,external_style:4},null),e&&(e.target&&g(e.target,this,e.anchor),e.props&&(this.$set(e.props),w()))}static get observedAttributes(){return["baseurl","title","maxlength","blob","dark","sidebar","external_style"]}get baseurl(){return this.$$.ctx[0]}set baseurl(e){this.$$set({baseurl:e}),w()}get title(){return this.$$.ctx[1]}set title(e){this.$$set({title:e}),w()}get maxlength(){return this.$$.ctx[6]}set maxlength(e){this.$$set({maxlength:e}),w()}get blob(){return this.$$.ctx[7]}set blob(e){this.$$set({blob:e}),w()}get dark(){return this.$$.ctx[2]}set dark(e){this.$$set({dark:e}),w()}get sidebar(){return this.$$.ctx[3]}set sidebar(e){this.$$set({sidebar:e}),w()}get external_style(){return this.$$.ctx[4]}set external_style(e){this.$$set({external_style:e}),w()}}customElements.define("blob-share",xe)});
