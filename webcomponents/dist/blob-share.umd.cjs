(function(_){typeof define=="function"&&define.amd?define(_):_()})(function(){"use strict";function _(){}function T(t){return t()}function O(){return Object.create(null)}function C(t){t.forEach(T)}function q(t){return typeof t=="function"}function le(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let L;function F(t,e){return L||(L=document.createElement("a")),L.href=e,t===L.href}function ie(t){return Object.keys(t).length===0}function g(t,e){t.appendChild(e)}function x(t,e,l){t.insertBefore(e,l||null)}function v(t){t.parentNode.removeChild(t)}function P(t,e){for(let l=0;l<t.length;l+=1)t[l]&&t[l].d(e)}function p(t){return document.createElement(t)}function z(t){return document.createTextNode(t)}function j(){return z(" ")}function re(){return z("")}function u(t,e,l){l==null?t.removeAttribute(e):t.getAttribute(e)!==l&&t.setAttribute(e,l)}function oe(t){return Array.from(t.childNodes)}function U(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function y(t,e,l){t.classList[l?"add":"remove"](e)}function ae(t){const e={};for(const l of t)e[l.name]=l.value;return e}let $;function A(t){$=t}function se(){if(!$)throw new Error("Function called outside component initialization");return $}function fe(t){se().$$.on_mount.push(t)}const N=[],D=[],M=[],V=[],ce=Promise.resolve();let B=!1;function ue(){B||(B=!0,ce.then(b))}function H(t){M.push(t)}const I=new Set;let R=0;function b(){const t=$;do{for(;R<N.length;){const e=N[R];R++,A(e),de(e.$$)}for(A(null),N.length=0,R=0;D.length;)D.pop()();for(let e=0;e<M.length;e+=1){const l=M[e];I.has(l)||(I.add(l),l())}M.length=0}while(N.length);for(;V.length;)V.pop()();B=!1,I.clear(),A(t)}function de(t){if(t.fragment!==null){t.update(),C(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(H)}}const he=new Set;function ge(t,e){t&&t.i&&(he.delete(t),t.i(e))}function me(t,e,l,n){const{fragment:r,on_mount:o,on_destroy:i,after_update:c}=t.$$;r&&r.m(e,l),n||H(()=>{const a=o.map(T).filter(q);i?i.push(...a):C(a),t.$$.on_mount=[]}),c.forEach(H)}function be(t,e){const l=t.$$;l.fragment!==null&&(C(l.on_destroy),l.fragment&&l.fragment.d(e),l.on_destroy=l.fragment=null,l.ctx=[])}function _e(t,e){t.$$.dirty[0]===-1&&(N.push(t),ue(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function pe(t,e,l,n,r,o,i,c=[-1]){const a=$;A(t);const f=t.$$={fragment:null,ctx:null,props:o,update:_,not_equal:r,bound:O(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:O(),dirty:c,skip_bound:!1,root:e.target||a.$$.root};i&&i(f.root);let k=!1;if(f.ctx=l?l(t,e.props||{},(h,w,...E)=>{const d=E.length?E[0]:w;return f.ctx&&r(f.ctx[h],f.ctx[h]=d)&&(!f.skip_bound&&f.bound[h]&&f.bound[h](d),k&&_e(t,h)),w}):[],f.update(),k=!0,C(f.before_update),f.fragment=n?n(f.ctx):!1,e.target){if(e.hydrate){const h=oe(e.target);f.fragment&&f.fragment.l(h),h.forEach(v)}else f.fragment&&f.fragment.c();e.intro&&ge(t.$$.fragment),me(t,e.target,e.anchor,e.customElement),b()}A(a)}let G;typeof HTMLElement=="function"&&(G=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(T).filter(q);for(const e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(t,e,l){this[t]=l}disconnectedCallback(){C(this.$$.on_disconnect)}$destroy(){be(this,1),this.$destroy=_}$on(t,e){const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(e),()=>{const n=l.indexOf(e);n!==-1&&l.splice(n,1)}}$set(t){this.$$set&&!ie(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});function J(t){const e={weekday:"long",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(t).toLocaleString(void 0,e)}function K(t,e,l){const n=t.slice();return n[12]=e[l],n}function Q(t,e,l){const n=t.slice();return n[15]=e[l],n}function W(t){let e;return{c(){e=p("link"),u(e,"rel","stylesheet"),u(e,"href",t[4])},m(l,n){x(l,e,n)},p(l,n){n&16&&u(e,"href",l[4])},d(l){l&&v(e)}}}function X(t){let e,l,n=t[1]&&t[3]==="true"&&Y(),r=t[5],o=[];for(let i=0;i<r.length;i+=1)o[i]=ne(K(t,r,i));return{c(){e=p("div"),n&&n.c(),l=j();for(let i=0;i<o.length;i+=1)o[i].c();u(e,"id","blobShare"),y(e,"dark",t[2]==="true"),y(e,"light",t[2]!=="true"),y(e,"sidebar",t[3]==="true"),y(e,"nosidebar",t[3]!=="true")},m(i,c){x(i,e,c),n&&n.m(e,null),g(e,l);for(let a=0;a<o.length;a+=1)o[a].m(e,null)},p(i,c){if(i[1]&&i[3]==="true"?n||(n=Y(),n.c(),n.m(e,l)):n&&(n.d(1),n=null),c&41){r=i[5];let a;for(a=0;a<r.length;a+=1){const f=K(i,r,a);o[a]?o[a].p(f,c):(o[a]=ne(f),o[a].c(),o[a].m(e,null))}for(;a<o.length;a+=1)o[a].d(1);o.length=r.length}c&4&&y(e,"dark",i[2]==="true"),c&4&&y(e,"light",i[2]!=="true"),c&8&&y(e,"sidebar",i[3]==="true"),c&8&&y(e,"nosidebar",i[3]!=="true")},d(i){i&&v(e),n&&n.d(),P(o,i)}}}function Y(t){return{c:_,m:_,d:_}}function Z(t){let e,l,n,r,o,i,c;return{c(){e=p("a"),l=p("div"),n=p("img"),u(n,"style","aspect-ratio=1.7778;"),u(n,"alt",r=t[12].title),F(n.src,o=t[12].image?t[12].image:t[0]+"/noimg.svg")||u(n,"src",o),u(n,"loading","lazy"),u(l,"class","img"),u(e,"href",i=t[0]+"/item/"+(t[12].slug||t[12].id)),u(e,"title",c=t[12].title),u(e,"target","_blank")},m(a,f){x(a,e,f),g(e,l),g(l,n)},p(a,f){f&32&&r!==(r=a[12].title)&&u(n,"alt",r),f&33&&!F(n.src,o=a[12].image?a[12].image:a[0]+"/noimg.svg")&&u(n,"src",o),f&33&&i!==(i=a[0]+"/item/"+(a[12].slug||a[12].id))&&u(e,"href",i),f&32&&c!==(c=a[12].title)&&u(e,"title",c)},d(a){a&&v(e)}}}function ee(t){let e,l=t[12].tags,n=[];for(let r=0;r<l.length;r+=1)n[r]=te(Q(t,l,r));return{c(){e=p("div");for(let r=0;r<n.length;r+=1)n[r].c();u(e,"class","tags")},m(r,o){x(r,e,o);for(let i=0;i<n.length;i+=1)n[i].m(e,null)},p(r,o){if(o&32){l=r[12].tags;let i;for(i=0;i<l.length;i+=1){const c=Q(r,l,i);n[i]?n[i].p(c,o):(n[i]=te(c),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=l.length}},d(r){r&&v(e),P(n,r)}}}function te(t){let e,l,n=t[15].name+"",r;return{c(){e=p("span"),l=z("#"),r=z(n),u(e,"class","tag")},m(o,i){x(o,e,i),g(e,l),g(e,r)},p(o,i){i&32&&n!==(n=o[15].name+"")&&U(r,n)},d(o){o&&v(e)}}}function ne(t){let e,l,n,r,o=J(t[12].date)+"",i,c,a,f=t[12].title+"",k,h,w,E,d=t[3]!=="true"&&Z(t),s=t[12].tags.length&&ee(t);return{c(){e=p("div"),d&&d.c(),l=j(),n=p("div"),r=p("div"),i=z(o),c=j(),a=p("a"),k=z(f),w=j(),s&&s.c(),E=j(),u(r,"class","subtitle"),u(a,"class","title"),u(a,"href",h=t[12].URL),u(n,"class","content"),u(e,"class","item")},m(m,S){x(m,e,S),d&&d.m(e,null),g(e,l),g(e,n),g(n,r),g(r,i),g(n,c),g(n,a),g(a,k),g(n,w),s&&s.m(n,null),g(e,E)},p(m,S){m[3]!=="true"?d?d.p(m,S):(d=Z(m),d.c(),d.m(e,l)):d&&(d.d(1),d=null),S&32&&o!==(o=J(m[12].date)+"")&&U(i,o),S&32&&f!==(f=m[12].title+"")&&U(k,f),S&32&&h!==(h=m[12].URL)&&u(a,"href",h),m[12].tags.length?s?s.p(m,S):(s=ee(m),s.c(),s.m(n,null)):s&&(s.d(1),s=null)},d(m){m&&v(e),d&&d.d(),s&&s.d()}}}function ke(t){let e,l,n=t[4]&&W(t),r=t[5].length&&X(t);return{c(){n&&n.c(),e=j(),r&&r.c(),l=re(),this.c=_},m(o,i){n&&n.m(o,i),x(o,e,i),r&&r.m(o,i),x(o,l,i)},p(o,[i]){o[4]?n?n.p(o,i):(n=W(o),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),o[5].length?r?r.p(o,i):(r=X(o),r.c(),r.m(l.parentNode,l)):r&&(r.d(1),r=null)},i:_,o:_,d(o){n&&n.d(o),o&&v(e),r&&r.d(o),o&&v(l)}}}function xe(t,e,l){let{baseurl:n=""}=e,{title:r=""}=e,{maxlength:o=!1}=e,{tags:i=""}=e,{places:c=""}=e,{blob:a=4}=e,{dark:f="false"}=e,{sidebar:k="true"}=e,{external_style:h=""}=e,w=!1,E=[];function d(){!w||fetch(`${n}/api/post/${a}`).then(s=>s.json()).then(s=>{l(5,E=s)}).catch(s=>{console.error("Error loading Blob API -> ",s)})}return fe(()=>{w=!0,d()}),t.$$set=s=>{"baseurl"in s&&l(0,n=s.baseurl),"title"in s&&l(1,r=s.title),"maxlength"in s&&l(6,o=s.maxlength),"tags"in s&&l(7,i=s.tags),"places"in s&&l(8,c=s.places),"blob"in s&&l(9,a=s.blob),"dark"in s&&l(2,f=s.dark),"sidebar"in s&&l(3,k=s.sidebar),"external_style"in s&&l(4,h=s.external_style)},t.$$.update=()=>{t.$$.dirty&974&&d(o&&r&&c&&i&&f&&show_recurrent&&k&&a)},[n,r,f,k,h,E,o,i,c,a]}class ve extends G{constructor(e){super(),this.shadowRoot.innerHTML=`<style>#blobShare{font-family:ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont,
      "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif,
      "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
      "Noto Color Emoji";overflow-x:hidden;width:100%;box-sizing:content-box;margin:0 auto;font-size:1rem;text-align:left}.nosidebar{max-width:1200px}.sidebar{max-width:500px;box-shadow:rgba(60, 64, 67, 0.4) 0px 1px 2px 0px,
      rgba(60, 64, 67, 0.25) 0px 1px 3px 1px;border-radius:5px;font-size:1rem}.item .img{width:450px;max-height:250px;aspect-ratio:1.7778;flex:1 0 auto}@media screen and (max-width: 800px){.item{flex-wrap:wrap}.item .img{max-width:100%}}.item img{object-fit:cover;border-radius:15px;width:100%;height:100%;box-shadow:rgba(50, 50, 93, 0.25) 0px 6px 12px -2px,
      rgba(0, 0, 0, 0.3) 0px 3px 7px -3px}.nosidebar .item{margin-bottom:2rem}.nosidebar .content{margin-left:1rem;margin-top:5px;text-align:left}.sidebar .content{flex-grow:1}.tags{margin-top:2px}.item{display:flex}a{text-decoration:none;color:var(--text-color);padding:8px 20px;margin:0;line-height:1.275rem;font-weight:400;font-size:0.875rem;position:relative;transition:background-color 0.3s cubic-bezier(0.25, 0.8, 0.5, 1), padding 0.3s;box-sizing:content-box;display:block}.dark{--bg-odd-color:#161616;--bg-even-color:#222;--bg-hover-color:#333;--text-color:white;--title-color:white;--line-color:rgba(120, 120, 120, 0.2)}.light{--bg-odd-color:#f5f5f5;--bg-even-color:#fafafa;--bg-hover-color:#eee;--text-color:#222;--title-color:black;--line-color:rgba(220, 220, 220, 0.9)}.sidebar a{background-color:var(--bg-even-color);border-bottom:1px solid var(--line-color)}.sidebar a:hover,.sidebar a:focus,.sidebar a:active{background-color:var(--bg-hover-color);padding-left:15px;padding-right:25px}.title{color:var(--title-color);font-weight:bold;font-size:1.3rem;line-height:1.1em}.nosidebar .title{font-size:1.9em;line-height:1.1em}.subtitle{font-size:1rem;line-height:1.1em;color:var(--title-color);opacity:0.9}.tag{margin-right:10px;display:inline-block}</style>`,pe(this,{target:this.shadowRoot,props:ae(this.attributes),customElement:!0},xe,ke,le,{baseurl:0,title:1,maxlength:6,tags:7,places:8,blob:9,dark:2,sidebar:3,external_style:4},null),e&&(e.target&&x(e.target,this,e.anchor),e.props&&(this.$set(e.props),b()))}static get observedAttributes(){return["baseurl","title","maxlength","tags","places","blob","dark","sidebar","external_style"]}get baseurl(){return this.$$.ctx[0]}set baseurl(e){this.$$set({baseurl:e}),b()}get title(){return this.$$.ctx[1]}set title(e){this.$$set({title:e}),b()}get maxlength(){return this.$$.ctx[6]}set maxlength(e){this.$$set({maxlength:e}),b()}get tags(){return this.$$.ctx[7]}set tags(e){this.$$set({tags:e}),b()}get places(){return this.$$.ctx[8]}set places(e){this.$$set({places:e}),b()}get blob(){return this.$$.ctx[9]}set blob(e){this.$$set({blob:e}),b()}get dark(){return this.$$.ctx[2]}set dark(e){this.$$set({dark:e}),b()}get sidebar(){return this.$$.ctx[3]}set sidebar(e){this.$$set({sidebar:e}),b()}get external_style(){return this.$$.ctx[4]}set external_style(e){this.$$set({external_style:e}),b()}}customElements.define("blob-share",ve)});
